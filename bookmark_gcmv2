javascript:(() => {
    const getStatus = (status) => status === undefined ? "Nesetat" : status ? "granted" : "denied";

    const checkGtmAndConsentMode = () => {
        const isGtmInstalled = !!window.google_tag_manager;
        const consentEntries = "google_tag_data" in window ? window.google_tag_data.ics.entries : null;

        let message = "Google Tag Manager: " + (isGtmInstalled ? "Detectat" : "Nedetectat") + "\n";

        if (!consentEntries) {
            message += "google_consent_mode_v2: Nu a fost detectat niciun parametru.";
        } else {
            for (const key in consentEntries) {
                const defaultStatus = getStatus(consentEntries[key]['default']);
                const updateStatus = getStatus(consentEntries[key]['update']);

                if (defaultStatus === "Nesetat" && updateStatus === "Nesetat") continue;

                message += `${key.toLowerCase()}:\n`;
                if (defaultStatus !== "Nesetat") message += ` Default: ${defaultStatus}\n`;
                if (updateStatus !== "Nesetat") message += ` Update: ${updateStatus}\n`;
            }
        }

        return message;
    };

    const resultMessage = checkGtmAndConsentMode();
    alert(resultMessage);
})();
